<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image to 3D Web App</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background-color: #f4f4f9; padding: 50px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .upload-area { border: 2px dashed #007bff; padding: 40px; border-radius: 8px; cursor: pointer; margin-bottom: 20px; }
        .upload-area:hover { background-color: #f0f8ff; }
        #viewer-container { display: none; margin-top: 20px; }
        model-viewer { width: 100%; height: 400px; background-color: #e9ecef; border-radius: 8px; }
        button { background-color: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #0056b3; }
        #loading { display: none; color: #ff9800; font-weight: bold; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="container">
        <h2>‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô 3D Model ü™Ñ</h2>
        
        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
            <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ</p>
            <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleUpload(event)">
        </div>

        <div id="loading">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ AI ‡∏õ‡∏±‡πâ‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•... (‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ)</div>

        <div id="viewer-container">
            <h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå 3D ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
            <model-viewer id="modelViewer" src="" auto-rotate camera-controls shadow-intensity="1"></model-viewer>
            <br>
            <button onclick="download3D()">‚¨áÔ∏è ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå .glb</button>
        </div>
    </div>

    <script>
        async function handleUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            document.getElementById('loading').style.display = 'block';
            document.getElementById('viewer-container').style.display = 'none';

            // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÉ‡∏´‡πâ Backend ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤
            const formData = new FormData();
            formData.append('image', file);

            try {
                /* ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏õ‡πÉ‡∏´‡πâ Backend (Node.js) ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ
                  ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ú‡∏°‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏î‡∏π‡πÑ‡∏î‡πâ
                */
                
                // const response = await fetch('http://localhost:3000/upload', {
                //     method: 'POST',
                //     body: formData
                // });
                // const data = await response.json();
                
                // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ß‡πà‡∏≤ AI ‡πÄ‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á URL ‡πÑ‡∏ü‡∏•‡πå 3D ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ (‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏ô‡πá‡∏ï)
                setTimeout(() => {
                    const mock3DUrl = 'https://modelviewer.dev/shared-assets/models/Astronaut.glb'; 
                    showModel(mock3DUrl);
                }, 2000); // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏£‡∏≠ AI ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

            } catch (error) {
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏Ñ‡∏£‡∏±‡∏ö');
                document.getElementById('loading').style.display = 'none';
            }
        }

        function showModel(url) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('viewer-container').style.display = 'block';
            document.getElementById('modelViewer').src = url;
        }

        function download3D() {
            const url = document.getElementById('modelViewer').src;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
